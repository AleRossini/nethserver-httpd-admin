Summary: Administration console configuration based on Apache/httpd
Name: nethserver-httpd-admin
Version: @@VERSION@@
Release: @@RELEASE@@%{?dist} 
License: GPL
Group: Networking/Daemons
Source: %{name}-%{version}.tar.gz
URL: http://dev.nethesis.it/projects/%{name}
BuildRoot: /var/tmp/%{name}-%{version}-%{release}-buildroot
BuildRequires: nethserver-devtools
BuildArch: noarch

Requires: httpd, php, mod_ssl, sudo
Requires: nethserver-php

AutoReq: no

%changelog
* Wed Mar  7 2012 Davide Principi <davide.principi@nethesis.it> - 6.1.0-1.nh.git0653f8e2c
- Replaced nethserver-httpd dependency with httpd, php, mod_ssl, sudo
- %post script conforming to NethServer Development Rules

* Wed Feb  8 2012 Davide <davide.principi@nethesis.it> - 0.0.5-1.nh
- Updated to commit:08244fc

* Tue Feb  7 2012 Davide <davide.principi@nethesis.it> - 0.0.4.2.nh
- Updated to commit:89109b23ccd3

* Fri Oct 07 2011 Giacomo Sanchietti <giacomo.sanchietti@gmail.com> 0.0.1-1nh
- First release based on e-smith-manager 2.2.0-5.1.nh

%description
Apache configuration for the web administration console

%prep
%setup

%build
perl createlinks
mkdir -p root/var/cache/nethserver-httpd-admin
mkdir -p root/etc/httpd/admin-conf

%install
rm -rf $RPM_BUILD_ROOT
(cd root ; find . -depth -print | cpio -dump $RPM_BUILD_ROOT)
rm -f %{name}-%{version}-%{release}-filelist
%{genfilelist} $RPM_BUILD_ROOT \
    --dir /var/cache/nethserver-httpd-admin/state 'attr(0750,admin,admin)' \
    --dir /var/cache/nethserver-httpd-admin 'attr(0750,admin,admin)'\
    > %{name}-%{version}-%{release}-filelist
echo "%doc COPYING" >> %{name}-%{version}-%{release}-filelist

%clean
rm -rf $RPM_BUILD_ROOT

%preun
%post
source /etc/nethserver/rpm_hook_functions
event_queue add %{name}-update


%postun

%files -f %{name}-%{version}-%{release}-filelist
%defattr(-,root,root)
