Summary: Administration console configuration based on Apache/httpd
Name: nethserver-httpd-admin
Version: @@VERSION@@
Release: @@RELEASE@@ 
License: GPL
Source: %{name}-%{version}.tar.gz
URL: http://dev.nethesis.it/projects/%{name}

BuildRequires: nethserver-devtools
BuildArch: noarch

Requires: httpd, php, mod_ssl, sudo
Requires: nethserver-php

AutoReq: no

%description
Apache configuration for the web administration console

%prep
%setup

%build
perl createlinks
mkdir -p root/var/cache/nethserver-httpd-admin
mkdir -p root/etc/httpd/admin-conf

%install
rm -rf $RPM_BUILD_ROOT
(cd root ; find . -depth -print | cpio -dump $RPM_BUILD_ROOT)
rm -f %{name}-%{version}-%{release}-filelist
%{genfilelist} $RPM_BUILD_ROOT \
    --dir /var/cache/nethserver-httpd-admin/state 'attr(0750,admin,admin)' \
    --dir /var/cache/nethserver-httpd-admin 'attr(0750,admin,admin)'\
    > %{name}-%{version}-%{release}-filelist
echo "%doc COPYING" >> %{name}-%{version}-%{release}-filelist

%clean
rm -rf $RPM_BUILD_ROOT

%preun
%post
source /etc/nethserver/rpm_hook_functions
event_queue add %{name}-update


%postun

%files -f %{name}-%{version}-%{release}-filelist
%defattr(-,root,root)


%changelog
* Thu Jan 31 2013 Davide Principi <davide.principi@nethesis.it> - 1.0.1-1.ns6
- Implemented nethserver-base certificate management


